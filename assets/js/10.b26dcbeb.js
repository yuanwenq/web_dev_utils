(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{412:function(t,s,a){t.exports=a.p+"assets/img/excution_context.3e3fb725.png"},413:function(t,s,a){t.exports=a.p+"assets/img/execution_context_stack.3ec0bd38.png"},414:function(t,s,a){t.exports=a.p+"assets/img/execution_context_img.3c9aba4c.png"},450:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"执行上下文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文"}},[t._v("#")]),t._v(" 执行上下文")]),t._v(" "),s("p",[s("code",[t._v("Javascript")]),t._v("中的执行上下文是指代码执行时的环境，包括变量、作用域、this值等信息。每当"),s("code",[t._v("Javascript")]),t._v("引擎执行一段可执行代码时，都会创建一个新的执行上下文，并将其添加到执行上下文栈中。当当前执行上下文执行完毕后，它将被从执行上下文栈中弹出，并恢复到上一级执行上下文中继续执行代码。")]),t._v(" "),s("h3",{attrs:{id:"执行上下文的类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文的类型"}},[t._v("#")]),t._v(" 执行上下文的类型")]),t._v(" "),s("ul",[s("li",[t._v("全局执行上下文: 只有一个，浏览器中的全局对象就是"),s("span",{staticClass:"e-1"},[t._v("window")]),t._v("对象，"),s("span",{staticClass:"e-1"},[t._v("this")]),t._v("指向这个全局对象")]),t._v(" "),s("li",[t._v("函数执行上下文: 存在无数个，只有在函数被调用的时候才会被创建，每次调用函数都会创建一个新的执行上下文")]),t._v(" "),s("li",[s("s",[t._v("Eavl函数执行上下文: 指的是运行在 eval 函数中的代码，很少用而且不建议使用")])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(412),alt:"execution_context"}})]),t._v(" "),s("p",[t._v("紫色框住的部分为全局上下文，蓝色和橘色框起来的是不同的函数上下文。只有全局上下文（的变量）能被其他任何上下文访问")]),t._v(" "),s("p",[t._v("可以有任意多个函数上下文，每次调用函数创建一个新的上下文，会创建一个私有作用域，函数内部声明的任何变量都不能在当前函数作用域外部直接访问")]),t._v(" "),s("h2",{attrs:{id:"生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),s("p",[t._v("执行上下文的生命周期包括三个阶段：创建阶段 → 执行阶段 → 销毁阶段")]),t._v(" "),s("h3",{attrs:{id:"创建阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建阶段"}},[t._v("#")]),t._v(" 创建阶段")]),t._v(" "),s("p",[t._v("当"),s("code",[t._v("Javascript")]),t._v("引擎开始执行可执行代码时，它会按照以下步骤创建执行上下文：")]),t._v(" "),s("ul",[s("li",[t._v("创建变量对象(VO)，包括函数参数，内部变量和函数声明等")]),t._v(" "),s("li",[t._v("创建作用域链(Scope Chain)，用于解析变量和函数引用")]),t._v(" "),s("li",[t._v("确定 this 值")]),t._v(" "),s("li",[t._v('进行"函数声明"提升(Function Hoisting) ：将代码中所有函数声明提升到当前作用域的顶部')])]),t._v(" "),s("h3",{attrs:{id:"执行阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行阶段"}},[t._v("#")]),t._v(" 执行阶段")]),t._v(" "),s("p",[t._v("当执行上下文创建完成后，"),s("code",[t._v("Javascript")]),t._v(" 引擎开始执行可执行代码。在执行阶段，"),s("code",[t._v("Javascript")]),t._v(" 引擎会按照以下步骤执行代码：")]),t._v(" "),s("ul",[s("li",[t._v("变量和函数会被添加到作用域中")]),t._v(" "),s("li",[t._v("代码按照顺序一行行执行")]),t._v(" "),s("li",[t._v("函数调用会创建一个新的函数执行上下文，压入执行上下文栈中。")])]),t._v(" "),s("h3",{attrs:{id:"销毁阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#销毁阶段"}},[t._v("#")]),t._v(" 销毁阶段")]),t._v(" "),s("p",[t._v("当执行上下文执行完毕后，"),s("code",[t._v("Javascript")]),t._v(" 引擎会将其从执行上下文栈中弹出，并销毁该执行上下文。")]),t._v(" "),s("p",[t._v("在销毁阶段，"),s("code",[t._v("Javascript")]),t._v(" 引擎会释放执行上下文中的资源，包括变量和作用域链等。")]),t._v(" "),s("ul",[s("li",[t._v("如果当前上下文有嵌套的函数执行上下文"),s("RouterLink",{attrs:{to:"/javascript/js_closure.html"}},[t._v("(闭包)")]),t._v("，也会先销毁内部的执行上下文再销毁外部的执行上下文")],1),t._v(" "),s("li",[t._v("如果当前上下文是全局上下文，则该上下文不会被销毁。")])]),t._v(" "),s("h2",{attrs:{id:"执行上下文栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行上下文栈"}},[t._v("#")]),t._v(" 执行上下文栈")]),t._v(" "),s("p",[t._v("执行上下文栈也称为调用栈，是一个LIFO(后进先出)数据结构。")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("Javascript")]),t._v("代码执行期间，每次进入一个新的函数或全局代码时，都会创建一个新的执行上下文，并将其推入执行上下文栈的顶部。当函数执行完毕或代码执行结束时，对应的执行上下文将被弹出执行上下文栈，"),s("code",[t._v("Javascript")]),t._v("引擎将继续执行上一个执行上下文栈顶部的代码。")]),t._v(" "),s("p",[s("img",{attrs:{src:a(413),alt:"execution_context_stack"}})]),t._v(" "),s("p",[t._v("例子：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Inside first function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("second")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Again inside first function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("second")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Inside second function'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("first")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Inside Global Execution Context'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("转化为图形：")]),t._v(" "),s("p",[s("img",{attrs:{src:a(414),alt:"img"}})]),t._v(" "),s("p",[t._v("分析流程")]),t._v(" "),s("ul",[s("li",[t._v("创建全局上下文请压入执行栈")]),t._v(" "),s("li",[t._v("first函数被调用，创建函数执行上下文并压入栈")]),t._v(" "),s("li",[t._v("执行first函数过程遇到second函数，再创建一个函数执行上下文并压入栈")]),t._v(" "),s("li",[t._v("second函数执行完毕，对应的函数执行上下文被推出执行栈，执行下一个执行上下文first函数")]),t._v(" "),s("li",[t._v("first函数执行完毕，对应的函数执行上下文也被推出栈中，然后执行全局上下文")]),t._v(" "),s("li",[t._v("所有代码执行完毕，全局上下文也会被推出栈中，程序结束")])])])}),[],!1,null,null,null);s.default=e.exports}}]);